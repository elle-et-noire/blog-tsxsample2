<!DOCTYPE html><html lang="ja"><head><meta property="og:type" content="website"/><meta property="og:site_name" content="lumieres/legeres"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><title>Vue.js 3 のリリース候補版を触ってみた · lumieres/legeres</title><meta name="description" content="もうそろそろ Vue.js 3 の安定版がリリースされそうだが、その前にリリース候補版を触ってみた。メインは Composition API。あと Vue.js 3 用の Vue "/><meta property="og:title" content="Vue.js 3 のリリース候補版を触ってみた ･ lumieres/legeres"/><meta property="og:description" content="もうそろそろ Vue.js 3 の安定版がリリースされそうだが、その前にリリース候補版を触ってみた。メインは Composition API。あと Vue.js 3 用の Vue "/><meta property="og:url" content="https://elle-et-noire.github.io/blog-tsxsample2/2020/08/vuejs3-rc"/><meta name="next-head-count" content="7"/><link rel="preload" href="/blog/_next/static/css/966f2184015dba7b.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/966f2184015dba7b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/blog/_next/static/chunks/webpack-1a86524882c82c68.js" defer=""></script><script src="/blog/_next/static/chunks/framework-6e4ba497ae0c8a3f.js" defer=""></script><script src="/blog/_next/static/chunks/main-d15cff072e078a2b.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-5e9b2f1eb60e7b0c.js" defer=""></script><script src="/blog/_next/static/chunks/919-231013f5e47261ba.js" defer=""></script><script src="/blog/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bslug%5D-3d0d7b5b21b5a35b.js" defer=""></script><script src="/blog/_next/static/fljwOa0DoVzI9yw59I1f1/_buildManifest.js" defer=""></script><script src="/blog/_next/static/fljwOa0DoVzI9yw59I1f1/_ssgManifest.js" defer=""></script><script src="/blog/_next/static/fljwOa0DoVzI9yw59I1f1/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="flex flex-col min-h-screen"><header><nav class="fixed w-full py-3 z-20 text-center font-semibold bg-gray-800" aria-label="Header navigation"><a class="px-5 py-3 no-underline font-mono tracking-tight" href="/blog/"><span class="text-xs text-gray-100 duration-1000">lumieres<!-- -->/</span><span class="text-pink-500 opacity-80 duration-1000">legeres</span></a></nav></header><main class="flex-grow container mx-auto pt-28 pb-10"><div class="style_initial__lfW24" role="status"></div><div><article><header class="mb-8"><h1 class="mb-10">Vue.js 3 のリリース候補版を触ってみた</h1><div class="italic text-right text-sm text-gray-400"><time dateTime="2020-08-24">Aug 24, 2020</time></div></header><div class="post">
<h2>はじめに</h2>
<p>もうそろそろ Vue.js 3 の安定版がリリースされそうだが、その前にリリース候補版を触ってみた。メインは Composition API。あと Vue.js 3 用の Vue Router と Vue Test Utils をちょっと。その他はほとんど触っていない。</p>
<h2>環境</h2>
<ul>
  <li>Vue.js v3.0.0-rc.9</li>
  <li>Vue Router v4.0.0-beta.7</li>
  <li>Vue Test Utils v2.0.0-beta.3</li>
</ul>
<h2>Composition API について</h2>
<p>Vue 2.x の Single File Components の書き方というのは Options API を使ったものらしく、 Vue.js 3 ではそれに加えて新たに Composition API というものが実装された。この Composition API の旨味は Single File Components において、今までどうしても分割して管理するのが難しかったロジック部分をより良い感じに分割・管理できるようになるところらしい。</p>
<p>今回 Vue.js 3 の Composition API の雰囲気を掴むために簡単な Web サイトを作成したわけだが、まぁ簡単な Web サイトなので当たり前だが、結果としてこの Composition API の旨味部分は全然感じられず、なんか React Hooks の Vue.js 版かな？くらいの感想しかなかった。</p>
<p>また、実際問題この Composition API を使って膨大なロジック部分をどのように分割・管理すればいいのかのベストプラクティスみたいなものがまだ見えてこないので、各々が探り探りでやっていき、時間とともに何か提案されていくんだろう、というのが現状のように思う。</p>
<h2>Vue Router について</h2>
<p>Vue Router も Composition API の実装により useRoute() とか useRouter() とかが用意されていて、Router 関連の処理を書く場合に利用できるになっている。</p>
<p>今までだと (Vue.js 2.x):</p>
<div class="remark-highlight">
  <pre class="language-unknown"><code class="language-unknown">this.$route.name</code></pre>
</div>
<p>みたいなところが Vue.js 3 の Composition API を使用している場合、以下のように書くことができる:</p>
<div class="remark-highlight">
  <pre class="language-js"><code class="language-js"><span class="token operator">&#x3C;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span>

    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&#x3C;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre>
</div>
<p>使うものだけ引っ張ってくる系はファイルを見ると何に依存しているのかがぱっと見でわかるので個人的には好み。</p>
<h2>Vue Test Utils について</h2>
<p>Composition API が実装されたことでわりと重要になってくるのがテスト周りで (テストがより書きやすくなるため) 、Vue.js 3 用の Vue Test Utils も触ってみたが、Vue.js 2.x 用のやつと若干の変更はあるものの、Vue Router のスタブがまだ実装されていないみたいで (2.x 系でいう <a href="https://vue-test-utils.vuejs.org/api/components/" target="_blank" rel="nofollow noopener noreferrer">RouterLinkStub</a>)、まだ時期尚早かなと思い、深く掘り下げるのはやめた。</p>
<h2>まとめ</h2>
<p>そんなこんなで Vue.js 3 のリリース候補版で作成した簡単な Web サイトがあるので興味のある人は見てほしい。Vue.js 3 で Bootstrap 5 のあれやこれやをただ動作確認しただけのサイトだが、Composition API の雰囲気はコードから読み取れるはず。</p>
<ul>
  <li><del>QuietBoatz</del></li>
  <li><del>Github jamband/quiet-boatz</del></li>
</ul>
<p>上記のリポジトリは現在存在しません (長期的なメンテナンスが難しいと判断したため削除した) 。Nuxt.js 3 がリリースされそうな頃合いにまた何か記事を書こうかなと思う。</p><script>
MathJax = {
        loader: {load: ['[tex]/physics', '[tex]/mathtools', '[tex]/color', '[tex]/upgreek', '[tex]/centernot']},
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          packages: { '[+]': ['physics', 'mathtools', 'color', 'upgreek', 'centernot'] },
          color: {
            padding: '5px',
            borderWidth: '2px',
          },
          macros: {
            parn: ["\\biggl(#1\\biggr)", 1],
            sqbr: ["\\biggl[#1\\biggr]", 1],
            pfrac: ["\\biggl(\\dfrac{#1}{#2}\\biggr)", 2],
            ds: "\\displaystyle",
            C: '{\\mathbb C}',
            R: '{\\mathbb R}',
            Q: '{\\mathbb Q}',
            Z: '{\\mathbb Z}',
            ssqrt: ['\\sqrt{\\smash[b]{\\mathstrut #1}}', 1],
            tcdegree: ['\\unicode{xb0}'],
            tccelsius: ['\\unicode{x2103}'],
            tcperthousand: ['\\unicode{x2030}'],
            tcmu: ['\\unicode{x3bc}'],
            tcohm: ['\\unicode{x3a9}'],
            bm: ['\\boldsymbol{#1}', 1],
            ol: ['\\overline{#1}', 1],
            ul: ['\\underline{#1}', 1],
            ub: ['\\underbrace{#1}', 1],
            ubt: ['\\underbrace{#1}_{\\text{#2}}', 2],
            i: '{\\mathrm{i}}',
            e: '{\\mathrm{e}}',
            ve: '{\\varepsilon}',
            slashed: ['{{#1\\!\\!\\!/}}', 1],
          },
          physics: {
            italicdiff: true,
            arrowdel: false,
          },
          tags: 'ams',
          tagSide: 'right',
          tagIndent: '0.8em',
          processRefs: true,
        },
        svg: {
          fontCache: 'global'
        },
        chtml: {
          displayAlign: 'left',
          displayIndent: '2em',
          mtextInheritFont: true,
        }
      };
</script>
<script id="MathJax-script"
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
</div><p class="mt-16 text-center"><a class="px-5 py-3 font-semibold" href="/blog/">Home</a></p></article></div></main><div class="mb-3 font-semibold text-center text-xs text-gray-500">© 2022 Tomoki Morita</div><footer class="py-3 text-center font-semibold bg-gray-800"><nav class="text-sm" aria-label="Footer navigation"><a class="px-5 py-3" href="/blog/about/">About</a><a class="px-5 py-3" href="/blog/contact/">Contact</a></nav></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Vue.js 3 のリリース候補版を触ってみた","date":"2020-08-24","tags":["vue"],"year":"2020","month":"08","slug":"vuejs3-rc","content":"\n\u003ch2\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eもうそろそろ Vue.js 3 の安定版がリリースされそうだが、その前にリリース候補版を触ってみた。メインは Composition API。あと Vue.js 3 用の Vue Router と Vue Test Utils をちょっと。その他はほとんど触っていない。\u003c/p\u003e\n\u003ch2\u003e環境\u003c/h2\u003e\n\u003cul\u003e\n  \u003cli\u003eVue.js v3.0.0-rc.9\u003c/li\u003e\n  \u003cli\u003eVue Router v4.0.0-beta.7\u003c/li\u003e\n  \u003cli\u003eVue Test Utils v2.0.0-beta.3\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eComposition API について\u003c/h2\u003e\n\u003cp\u003eVue 2.x の Single File Components の書き方というのは Options API を使ったものらしく、 Vue.js 3 ではそれに加えて新たに Composition API というものが実装された。この Composition API の旨味は Single File Components において、今までどうしても分割して管理するのが難しかったロジック部分をより良い感じに分割・管理できるようになるところらしい。\u003c/p\u003e\n\u003cp\u003e今回 Vue.js 3 の Composition API の雰囲気を掴むために簡単な Web サイトを作成したわけだが、まぁ簡単な Web サイトなので当たり前だが、結果としてこの Composition API の旨味部分は全然感じられず、なんか React Hooks の Vue.js 版かな？くらいの感想しかなかった。\u003c/p\u003e\n\u003cp\u003eまた、実際問題この Composition API を使って膨大なロジック部分をどのように分割・管理すればいいのかのベストプラクティスみたいなものがまだ見えてこないので、各々が探り探りでやっていき、時間とともに何か提案されていくんだろう、というのが現状のように思う。\u003c/p\u003e\n\u003ch2\u003eVue Router について\u003c/h2\u003e\n\u003cp\u003eVue Router も Composition API の実装により useRoute() とか useRouter() とかが用意されていて、Router 関連の処理を書く場合に利用できるになっている。\u003c/p\u003e\n\u003cp\u003e今までだと (Vue.js 2.x):\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\n  \u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ethis.$route.name\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003eみたいなところが Vue.js 3 の Composition API を使用している場合、以下のように書くことができる:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\n  \u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003escript lang\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"ts\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e defineComponent \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'vue'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useRoute \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'vue-router'\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003edefault\u003c/span\u003e \u003cspan class=\"token function\"\u003edefineComponent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003esetup\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e route \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseRoute\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eroute\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003escript\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003cp\u003e使うものだけ引っ張ってくる系はファイルを見ると何に依存しているのかがぱっと見でわかるので個人的には好み。\u003c/p\u003e\n\u003ch2\u003eVue Test Utils について\u003c/h2\u003e\n\u003cp\u003eComposition API が実装されたことでわりと重要になってくるのがテスト周りで (テストがより書きやすくなるため) 、Vue.js 3 用の Vue Test Utils も触ってみたが、Vue.js 2.x 用のやつと若干の変更はあるものの、Vue Router のスタブがまだ実装されていないみたいで (2.x 系でいう \u003ca href=\"https://vue-test-utils.vuejs.org/api/components/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eRouterLinkStub\u003c/a\u003e)、まだ時期尚早かなと思い、深く掘り下げるのはやめた。\u003c/p\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003eそんなこんなで Vue.js 3 のリリース候補版で作成した簡単な Web サイトがあるので興味のある人は見てほしい。Vue.js 3 で Bootstrap 5 のあれやこれやをただ動作確認しただけのサイトだが、Composition API の雰囲気はコードから読み取れるはず。\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003cdel\u003eQuietBoatz\u003c/del\u003e\u003c/li\u003e\n  \u003cli\u003e\u003cdel\u003eGithub jamband/quiet-boatz\u003c/del\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e上記のリポジトリは現在存在しません (長期的なメンテナンスが難しいと判断したため削除した) 。Nuxt.js 3 がリリースされそうな頃合いにまた何か記事を書こうかなと思う。\u003c/p\u003e\u003cscript\u003e\nMathJax = {\n        loader: {load: ['[tex]/physics', '[tex]/mathtools', '[tex]/color', '[tex]/upgreek', '[tex]/centernot']},\n        tex: {\n          inlineMath: [['$', '$'], ['\\\\(', '\\\\)']],\n          packages: { '[+]': ['physics', 'mathtools', 'color', 'upgreek', 'centernot'] },\n          color: {\n            padding: '5px',\n            borderWidth: '2px',\n          },\n          macros: {\n            parn: [\"\\\\biggl(#1\\\\biggr)\", 1],\n            sqbr: [\"\\\\biggl[#1\\\\biggr]\", 1],\n            pfrac: [\"\\\\biggl(\\\\dfrac{#1}{#2}\\\\biggr)\", 2],\n            ds: \"\\\\displaystyle\",\n            C: '{\\\\mathbb C}',\n            R: '{\\\\mathbb R}',\n            Q: '{\\\\mathbb Q}',\n            Z: '{\\\\mathbb Z}',\n            ssqrt: ['\\\\sqrt{\\\\smash[b]{\\\\mathstrut #1}}', 1],\n            tcdegree: ['\\\\unicode{xb0}'],\n            tccelsius: ['\\\\unicode{x2103}'],\n            tcperthousand: ['\\\\unicode{x2030}'],\n            tcmu: ['\\\\unicode{x3bc}'],\n            tcohm: ['\\\\unicode{x3a9}'],\n            bm: ['\\\\boldsymbol{#1}', 1],\n            ol: ['\\\\overline{#1}', 1],\n            ul: ['\\\\underline{#1}', 1],\n            ub: ['\\\\underbrace{#1}', 1],\n            ubt: ['\\\\underbrace{#1}_{\\\\text{#2}}', 2],\n            i: '{\\\\mathrm{i}}',\n            e: '{\\\\mathrm{e}}',\n            ve: '{\\\\varepsilon}',\n            slashed: ['{{#1\\\\!\\\\!\\\\!/}}', 1],\n          },\n          physics: {\n            italicdiff: true,\n            arrowdel: false,\n          },\n          tags: 'ams',\n          tagSide: 'right',\n          tagIndent: '0.8em',\n          processRefs: true,\n        },\n        svg: {\n          fontCache: 'global'\n        },\n        chtml: {\n          displayAlign: 'left',\n          displayIndent: '2em',\n          mtextInheritFont: true,\n        }\n      };\n\u003c/script\u003e\n\u003cscript id=\"MathJax-script\"\n  src=\"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js\"\u003e\n\u003c/script\u003e\n"}},"__N_SSG":true},"page":"/[year]/[month]/[slug]","query":{"year":"2020","month":"08","slug":"vuejs3-rc"},"buildId":"fljwOa0DoVzI9yw59I1f1","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>